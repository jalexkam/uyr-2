(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{823:function(t,e,s){"use strict";s.r(e);var a=s(19),r=s.n(a),n=s(5),i=s.n(n),o=s(10),c=s(4),l=s.n(c),p=s(1),u=s(24),d=s.n(u),m=(s(38),s(198)),h=s.n(m);function f(t,e,s,a,r,n,i){try{var o=t[n](i),c=o.value}catch(t){return void s(t)}o.done?e(c):Promise.resolve(c).then(a,r)}function v(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function b(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?v(s,!0).forEach((function(e){_(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):v(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function _(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}i.a.use(d.a),i.a.component("v-otp-input",h.a);var C,g,O={name:"Regiter",data:function(){return{status:"",message:"",btnDisable:!1,Custloader:"none",position:"right top",remember:!1,show:!0,otpForm:new o.a({otpToken:"",verify_otp:""}),isbtnDisabled:!1,isSpinner:!1,resendOtpForm:new o.a({email:""}),otpSentFlag:""}},created:function(){this.$route.params.id&&(this.otpForm.otpToken=this.$route.params.id),this.ajax_error.errors=[],this.fetchUser(),this.checkVeridied(this.$route.params.id)},computed:b({},Object(p.c)("auth",["ajax_error","otpResultData","resendOtpResultData","checkVerifiedResultData"])),methods:b({},Object(p.b)("auth",["fetchUser","validateUserOtp","resendUserOtp","checkIfAlreadyVerified"]),{fetchUser:(C=r.a.mark((function t(){var e,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.get("/api/get_user");case 3:e=t.sent,s=e.data,this.user=s,""!=this.user&&this.$router.push({path:"dashboard"}),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,this,[[0,9]])})),g=function(){var t=this,e=arguments;return new Promise((function(s,a){var r=C.apply(t,e);function n(t){f(r,s,a,n,i,"next",t)}function i(t){f(r,s,a,n,i,"throw",t)}n(void 0)}))},function(){return g.apply(this,arguments)}),handleOnComplete:function(t){this.otpForm.verify_otp=t},handleOnChange:function(t){this.otpForm.verify_otp=t},validateotp:function(){var t=this;this.isbtnDisabled=!0,this.isSpinner=!0,""!=this.otpForm.verify_otp?this.validateUserOtp(this.otpForm).then((function(){i.a.$toast.open({message:t.otpResultData.data.message,type:t.otpResultData.data.status,position:"top-right"}),t.isbtnDisabled=!1,t.isSpinner=!1,"success"==t.otpResultData.data.status&&t.$router.push({name:"login"}).catch((function(){}))})).catch((function(e){t.isbtnDisabled=!1,t.isSpinner=!1})):(this.isbtnDisabled=!1,this.isSpinner=!1,i.a.$toast.open({message:"Please enter OTP !",type:"error",position:"top-right"}))},resend_otp:function(){var t=this;this.isbtnDisabled=!0,this.isSpinner=!0,""!=this.resendOtpForm.email?this.resendUserOtp(this.resendOtpForm).then((function(){t.isbtnDisabled=!1,t.isSpinner=!1,"success"==t.resendOtpResultData.data.status?(t.otpSentFlag=!0,t.resendOtpForm.email="",t.show=!0,setTimeout((function(){t.$router.push({name:"verify-otp",params:{id:t.resendOtpResultData.data.otpToken}}).catch((function(){})),t.otpSentFlag=!1,t.otpForm.otpToken=t.$route.params.id}),5e3)):(t.otpSentFlag=!1,i.a.$toast.open({message:t.resendOtpResultData.data.message,type:t.resendOtpResultData.data.status,position:"top-right"}))})):(this.otpSentFlag=!1,this.isbtnDisabled=!1,this.isSpinner=!1,i.a.$toast.open({message:"Please enter Email ID !",type:"error",position:"top-right"}))},checkVeridied:function(t){var e=this;this.checkIfAlreadyVerified(t).then((function(){"error"==e.checkVerifiedResultData.data.status&&e.$router.push({name:"page-not-found"})}))}})},y=s(6),w=Object(y.a)(O,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-login"},[s("CContainer",{attrs:{fluid:""}},[s("CRow",{staticClass:"justify-content-center"},[s("CCol",{attrs:{lg:"6"}},[s("div",{staticClass:"login_logoo"},[s("img",{attrs:{src:"/images/uyr_logo.png",alt:"Logo",width:"200px"}})])]),t._v(" "),s("CCol",{attrs:{lg:"6",md:"6",sm:"9"}},[s("div",{staticClass:"log_head"},[s("router-link",{attrs:{to:{name:"homepage"}}},[s("CButton",{staticClass:"home_button"},[s("vue-fontawesome",{staticClass:"mr-2 my-0",attrs:{icon:"home",size:"1.1"}}),t._v("\n              Home\n            ")],1)],1)],1),t._v(" "),t.otpSentFlag?s("div",{staticClass:"gif_check_animation"},[s("svg",{staticClass:"checkmark",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52"}},[s("circle",{staticClass:"checkmark__circle",attrs:{cx:"26",cy:"26",r:"25",fill:"none"}}),t._v(" "),s("path",{staticClass:"checkmark__check",attrs:{fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"}})]),t._v(" "),s("h2",[t._v("OTP Sent")]),t._v(" "),s("p",{staticClass:"text-center"},[t._v("A One Time Password(OTP) has been sent to your registered Email Id")])]):t._e(),t._v(" "),s("div",{staticClass:"login_section"},[t.show?s("div",{staticClass:"login_form otp_form"},[s("h2",[t._v("Please Enter the OTP to Verify Your Account")]),t._v(" "),s("p",[t._v("OTP is sent to your registered email Id")]),t._v(" "),s("div",{staticClass:"l_form"},[s("CForm",{staticClass:"validate-form",on:{submit:function(e){return e.preventDefault(),t.validateotp.apply(null,arguments)},keydown:function(e){return t.form.onKeydown(e)}}},[s("CRow",{staticClass:"justify-content-center"},[s("CCol",{attrs:{md:"10"}},[s("v-otp-input",{staticClass:"otp_section",attrs:{inputClasses:"otp-input",numInputs:6,separator:" ",shouldAutoFocus:!0},on:{"on-complete":t.handleOnComplete,"on-change":t.handleOnChange}})],1),t._v(" "),s("CCol",{staticClass:"text-center",attrs:{md:"10"}},[s("CButton",{staticClass:"submitbtn btn",attrs:{disabled:t.isbtnDisabled,type:"submit"}},[t.isSpinner?s("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v(" Validate OTP")])],1)],1)],1)],1)]):s("div",{staticClass:"login_form otp_form"},[s("h2",[t._v("Resend One Time Password (OTP)")]),t._v(" "),s("p",[t._v("Please enter your Email Id to get a new OTP for account verification")]),t._v(" "),s("div",{staticClass:"l_form"},[s("CForm",{attrs:{method:"POST"},on:{submit:function(e){return e.preventDefault(),t.resend_otp.apply(null,arguments)}}},[s("CRow",{staticClass:"justify-content-center"},[s("CCol",{attrs:{md:"10"}},[s("div",{staticClass:"p-relative"},[s("CInput",{staticClass:"cust-form-cont",attrs:{prependHtml:"<i class='cui-user'></i>",placeholder:"your@email_id.com",autocomplete:"username email"},scopedSlots:t._u([{key:"prepend-content",fn:function(){return[s("CIcon",{attrs:{name:"cil-envelope-closed"}})]},proxy:!0}]),model:{value:t.resendOtpForm.email,callback:function(e){t.$set(t.resendOtpForm,"email",e)},expression:"resendOtpForm.email"}}),t._v(" "),t.ajax_error.errors&&t.ajax_error.errors.email?s("p",{staticClass:"text-danger errorLogin posAbs"},[s("i",{staticClass:"fa fa-info-circle pr-2"}),t._v(" "),s("span",[t._v(t._s(t.ajax_error.errors.email[0]))])]):t._e()],1)]),t._v(" "),s("CCol",{staticClass:"text-center",attrs:{md:"10"}},[s("CButton",{staticClass:"submitbtn btn",attrs:{disabled:t.isbtnDisabled,type:"submit"}},[t.isSpinner?s("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v(" Resend OTP")]),t._v(" "),s("div",{staticClass:"resent_link mt-3",on:{click:function(e){t.show=!t.show}}},[s("a",{attrs:{href:"#"}},[t._v("Back")])])],1)],1)],1)],1)])])])],1)],1)],1)}),[],!1,null,null,null);e.default=w.exports}}]);